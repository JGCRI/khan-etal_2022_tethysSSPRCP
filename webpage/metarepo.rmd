---
pagetitle: khan_etal_2022_tethysSSPRCP
output: 
  html_document:
    toc: true
    toc_float: true
    toc_collapsed: true
    #toc_depth: 3
    #number_sections: false
    theme: cosmo
    #inverse: true
---

<!-- Allow href to tabsets --> 
```{js, echo=FALSE}
function goToTab() {
  var hash = String(window.location.href.match("#.*$"));
  var target = document.querySelector("a[role = 'tab'][href='" + hash + "']");
  if (target !== null) {
    var greatGrandParent = target.parentElement.parentElement.parentElement;
    if (greatGrandParent.getAttribute("role") == "tabpanel") {
      document.querySelector("a[role = 'tab'][href='#" + greatGrandParent.getAttribute("id") + "']").click();
    }
    target.click();
    target.scrollIntoView();
  }
}

window.onload = function() {
  setTimeout(goToTab, 1000);
}

window.onhashchange = goToTab;
```

```{r setup, echo=FALSE}
sector_names = c("total"       = "Total",
                 "dom"         = "Domestic",
                 "elec"        = "Electricity",
                 "mfg"         =" Manufacturing",
                 "min"         = "Mining",
                 "liv"         = "Livestock",
                 "irr"         = "Irrigation",
                 "Corn"        = "Corn",
                 "FiberCrop"   = "Fiber Crop",
                 "MiscCrop"    = "Misc Crop",
                 "OilCrop"     = "Oil Crop",
                 "OtherGrain"  = "Other Grain",
                 "PalmFruit"   = "Palm Fruit",
                 "Rice"        = "Rice",
                 "Root_Tuber"  = "Root Tuber",
                 "SugarCrop"   = "Sugar Crop",
                 "Wheat"       = "Wheat",
                 "FodderHerb"  = "Fodder Herb",
                 "FodderGrass" = "Fodder Grass",
                 "biomass"     = "Biomass")

scenario_names = c("ssp1_rcp26_gfdl"   = "SSP 1, RCP 2.6, gfdl",
                   "ssp2_rcp45_hadgem" = "SSP 2, RCP 4.5, hadgem",
                   "ssp3_rcp60_ipsl"   = "SSP 3, RCP 6.0, ipsl",
                   "ssp4_rcp45_miroc"  = "SSP 4, RCP 4.5, miroc",
                   "ssp5_rcp85_noresm" = "SSP 5, RCP 8.5, noresm")
```

<div class="header_logo">
<img src="images/logo_gcims_white.png" style="float:right;height:30px; padding-top:10px;">
<img src="images/logo_pnnl_white.png" style="float:right;height:40px;">
</div>

<!-------------------------->
<!-------------------------->
# Citation
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

Khan, Z., Thompson, I., Vernon, C., Graham, N., Wild, T.B., Chen, M., 2022. A global gridded monthly water withdrawal dataset for multiple sectors from 2010 to 2100 at 0.5° resolution under a range of socioeconomic and climate scenarios. (In progress) Journal_TBD, DOI: XXXX

<br>

<!-------------------------->
<!-------------------------->
# Models Used
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

```{r, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra)
data.frame(
    Model = c("Tethys"),
    Version = c("v1.3.0"),
    Description = c("Spatiotemporal downscaling model for global water use"),
    Language = c("Python"),
    Link = c("https://jgcri.github.io/tethys/")
    ) %>% 
  kbl() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

<br>

<!-------------------------->
<!-------------------------->
# Data Inputs
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

```{r, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra)
data.frame(
  Data = c("GCAM Outputs",
           "Demeter Outputs"),
  Version = c("v4.3.chen http://doi.org/10.5281/zenodo.3713432",
              "v1.chen http://doi.org/10.5281/zenodo.3713378"),
  Location = c("https://data.pnnl.gov/dataset/13224",
               "https://data.pnnl.gov/dataset/13192")
    ) %>% 
  kbl() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

<br>

<!-------------------------->
<!-------------------------->
# Data Outputs
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

```{r, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra)
data.frame(
  Dataset = c("Tethys Outputs"),
  Version = c("v1.3.0 ADD_DOI_HERE"),
  Location = c("https://doi.org/10.7910/DVN/VIQEAB")
    ) %>% 
  kbl() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

<br>

<!-------------------------->
<!-------------------------->
# Workflows
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

```{r, echo=FALSE, out.width="40%", fig.align='center', fig.cap="Workflow Summary"}
knitr::include_graphics("images/workflow_summary.jpg")
```

<br>

<!-------------------------->
<!-------------------------->
# Workflow 1 - Scenarios
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

This dataset contains water withdrawal projections under a range of socioeconomic and climate scenarios. Combinations of five Shared Socioeconomic Pathways (SSPs 1-5) and four Representative Concentration Pathways (RCPs 2.6, 4.5, 6, and 8.5) are used. However, RCP 2.6 is not considered possible under SSP 3, and RCP 8.5 is only considered possible for SSP 5. This leaves 15 valid SSP-RCP combinations, shown in the diagram below.

```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Workflow 1"}
knitr::include_graphics("images/workflow1.jpg")
```

For each valid SSP-RCP combination, five General Circulation Models (GCMs) are used. This gives a grand total of 75 SSP-RCP-GCM combinations, which are fed into GCAM.

<br>

<!-------------------------->
<!-------------------------->
# Workflow 2 - Model Runs
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

GCAM is run for each SSP-RCP-GCM combination. The GCAM outputs are at the resolution of 32 geopolitical regions, and 235 water basins, with 5-year timesteps. The sectoral water withdrawal outputs from GCAM are the primary inputs to Tethys, which will be downscaled to the target resolution. Crop outputs from GCAM are sent to Demeter for downscaling, to be used by Tethys for the irrigation sector.

```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Workflow 2"}
knitr::include_graphics("images/workflow2.jpg")
```

<br>

<!-------------------------->
<!-------------------------->
# Workflow 3 - Spatial Downscaling
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

Water withdrawals and consumption data for each sector are downscaled spatially first, from GCAM's 32 regions (or in the case of irrigation, 434 region-basin intersections) to a 0.5 degree gridded format. Of the 259,200 possible grid cells at this resolution (360 x 720), only the 67,420 cells categorized as land are considered.
Different sectors use different algorithms to allocate a region's water withdrawals and consumption among its constituent grid cells, but in principle they are very similar: use gridded values of some proxy quantity to approximate the spatial distribution (i.e., divide each cell's value by the total of all cells belonging to that region), then apply that distribution to GCAM's value. These algorithms were derived from research by Edmonds and Reilly, 1985.

```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Workflow 3"}
knitr::include_graphics("images/workflow3.jpg")
```


```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Spatial Workflow"}
knitr::include_graphics("images/spatialworkflow.png")
```

Different downscaling methods are used for different sectors. For spatial downscaling, the workflow is divided into three parts:

* A. Nonagricultural Sectors
* B. Livestock
* C. Irrigation

These are explained in detail in their respective subsections. Keep in mind that downscaling occurs not just for all regions in a single slice of time, but for every 5 years from 2010 to 2100, across 75 alternative futures (SSP-RCP-GCM combinations).

<br>

<!-------------------------->
## Workflow 3A - Nonagricultural Sectors
<!-------------------------->

For nonagricultural sectors (domestic, electricity, manufacturing, and mining), water withdrawals and consumption in each grid cell are assumed to be proportional to that cell’s population. The population data set used for this paper is from Gridded Population of the World (CIESIN, 2016). Tethys uses the nearest available year, which for this paper was 2010 in 2010, and 2015 in all other years.
Each region's population is determined by taking the sum of population over all cells belonging to that region. For each of these sectors, Tethys calculates the withdrawal for a given cell by

$$\text{withdrawal}_\text{[sector], cell} = \text{withdrawal}_\text{[sector], region} \times \frac{\text{population}_\text{cell}}{\text{population}_\text{region}}.$$
An analogous formula is used for consumption:
$$\text{consumption}_\text{[sector], cell} = \text{consumption}_\text{[sector], region} \times \frac{\text{population}_\text{cell}}{\text{population}_\text{region}}.$$
```{r, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra)
data.frame(
  Name = c("Gridded Population of the World, Version 4"),
  File = c("GPW_population.csv"),
  Reference = c("CIESIN, 2016"),
  Source = c("http://dx.doi.org/10.7927/H4X63JVC")
    ) %>% 
  kbl() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

<br>

<!-------------------------->
## Workflow 3B - Livestock
<!-------------------------->

Gridded global maps (Wint and Robinson, 2007) for six types of livestock (cattle, buffalo, sheep, goats, pigs, and poultry) are used as a proxy to downscale livestock water withdrawal and consumption. GCAM outputs are organized into five types (beef, dairy, pork, poultry, and "sheepgoat"), so these are first reorganized to match the six maps using ratios for each region, estimated from FAO gridded livestock of the world. These are stored in the files bfracFAO2005.csv ("buffalo fraction") and gfracFAO2005.csv ("goat fraction"). The following formulas are used for each region:

$$\begin{align}
\text{buffalo} &= (\text{beef} + \text{dairy}) \times \text{bfrac}\\
\text{cattle} &= (\text{beef} + \text{dairy}) \times (1-\text{bfrac})\\
\text{goat} &= \text{sheepgoat} \times \text{gfrac}\\
\text{sheep} &= \text{sheepgoat} \times (1-\text{gfrac})
\end{align}$$

No adjustment is required for pork (pigs) or poultry. After this, downscaling for each livestock type is very similar to downscaling the nonagricultural sectors, except the respective livestock population (heads) is used as the proxy instead of human population.

$$\text{withdrawal}_\text{[animal], cell} = \text{withdrawal}_\text{[animal], region} \times \frac{\text{heads}_\text{[animal], cell}}{\text{heads}_\text{[animal], region}}.$$

The results for each of the six types are then added together to get the total livestock withdrawal for each cell:

$$\begin{align}
\text{withdrawal}_\text{livestock, cell} =
&\phantom{{}+{}}\text{withdrawal}_\text{cattle, cell}\\
&+ \text{withdrawal}_\text{buffalo, cell}\\
&+ \text{withdrawal}_\text{sheep, cell}\\
&+ \text{withdrawal}_\text{goat, cell}\\
&+ \text{withdrawal}_\text{pig, cell}\\
&+ \text{withdrawal}_\text{poultry, cell}
\end{align}$$

Again, analogous formulas follow for consumption.

```{r, results = 'show', eval=TRUE, echo=FALSE, warning=FALSE, error = FALSE, message = FALSE}
library(kableExtra)
data.frame(
  Name = c("Gridded Livestock of the World",
           "Buffalo Fraction",
           "Goat Fraction"),
  File = c("livestock_<animal>.csv",
           "bfracFAO2005.csv",
           "gfracFAO2005.csv"),
  Reference = c("Wint and Robinson, 2007",
                '"estimated from FAO gridded livestock of the world"',
                '"estimated from FAO gridded livestock of the world"'),
  Source = c("http://www.fao.org/docrep/010/a1259e/a1259e00.htm",
             "",
             "")
    ) %>% 
  kbl() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

<br>

<!-------------------------->
## Workflow 3C - Irrigation
<!-------------------------->

GCAM irrigation withdrawal and consumption outputs are organized by 13 crop types: Biomass, Corn, Fiber Crop, Misc Crop, Oil Crop, Other Grain, Palm Fruit, Rice, Root Tuber, Sugar Crop, Wheat, Fodder Herb, and Fodder Grass. Demeter provides a spatial landcover breakdown by all crop types except biomass, which is downscaled uniformly within a region-basin intersection (with respect to land area).

$$\text{withdrawal}_\text{biomass, cell} = \text{withdrawal}_\text{biomass, region} \times \frac{\text{area}_\text{cell}}{\text{area}_\text{region}},$$

When possible, the other 12 crops are downscaled in proportion to the crop land area maps from Demeter, which have been reaggregated to the target resolution of 0.5 degrees. There are certain exceptions. If the GCAM withdrawal or consumption value for a crop in some region-basin is nonzero, but Demeter does not show any cells with that crop type in that region-basin, it will be downscaled uniformly, the same as biomass.

Additionally, it is possible for GCAM and Demeter have different total crop irrigation areas for a region-basin, so applying the raw Demeter ratios to irrigation withdrawals or consumption (which are directly related to irrigation areas) could result in cell withdrawal values that imply larger irrigation area than total cell area. In order to avoid this non-physical situation, excess irrigation area in cells that are above capacity is assigned evenly among irrigated cells with capacity remaining if there are any, otherwise it is assigned evenly among the remaining cells in the region-basin. Should there still be excess after those cells have been filled, it would be dropped.

Using these adjusted irrigation area values for each crop, cell withdrawal values are given by

$$\text{withdrawal}_\text{[crop], cell} = \text{withdrawal}_\text{[crop], region} \times \frac{\text{area}_\text{[crop], cell}}{\text{area}_\text{[crop], region}},$$

and the analogous formula is used for consumption. The total irrigation sector value for a cell is the sum of that cell's values for all 13 crops.

Note that 6 of the 434 region-basin intersections are so small that they are not represented in the 0.5 degree mapping, causing any of their irrigation withdrawals or consumption to be dropped, though these values are correspondingly small.


<br>

<!-------------------------->
<!-------------------------->
# Workflow 4 - Temporal Downscaling
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

At this stage the data has been downscaled spatially to 0.5 degree grids, but is still in 5 year timesteps. First, linear interpolation is applied to produce annual data. Then, downscaling algorithms are applied to each sector to produce monthly data with seasonal variation.

```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Workflow 4"}
knitr::include_graphics("images/workflow4.jpg")
```

```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Temporal Workflow"}
knitr::include_graphics("images/temporalworkflow.png")
```

For spatial downscaling, the workflow is divided into four parts:

* A. Livestock, Manufacturing, and Mining
* B. Domestic
* C. Electricity Generation
* D. Irrigation


<!-------------------------->
## Workflow 4A - Livestock, Manufacturing, and Mining
<!-------------------------->

For livestock, manufacturing, and mining, a uniform distribution is applied. The withdrawal for the year is divided between months according to the number of days.

<br>

<!-------------------------->
## Workflow 4B - Domestic
<!-------------------------->

Temporally downscaling domestic withdrawal is based on monthly average temperatures, and the relative withdrawals between warmest and coolest months.

<br>

<!-------------------------->
## Workflow 4C - Electricity Generation
<!-------------------------->

Assume water use is proportional to electricity generated. Formula based on HDD, CDD.

<br>

<!-------------------------->
## Workflow 4D - Irrigation
<!-------------------------->

Monthly weighted irrigation profiles based on region and crop type.

<br>

<!-------------------------->
<!-------------------------->
# Workflow 5 - Results 
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

<!-------------------------->
## Annual {.tabset}
<!-------------------------->

### Total
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Total Annual Water Withdrawal by SSP-RCP-GCM"}
knitr::include_graphics("images/figure1.png")
```

### By Sector
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-GCM and Sector"}
knitr::include_graphics("images/figure2.png")
```

### Crops
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-GCM and Sector"}
knitr::include_graphics("images/figure6.png")
```

### GCMs {.tabset .tabset-pills}

#### GFDL
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-Sector, GCM: gfdl"}
knitr::include_graphics("images/figure3a.png")
```

#### HADGEM
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="TGlobal Annual Water Withdrawal by SSP-RCP-Sector, GCM: hadgem"}
knitr::include_graphics("images/figure3b.png")
```

#### IPSL
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-Sector, GCM: ipsl"}
knitr::include_graphics("images/figure3c.png")
```

#### MIROC
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-Sector, GCM: miroc"}
knitr::include_graphics("images/figure3d.png")
```

#### NORESM
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Global Annual Water Withdrawal by SSP-RCP-Sector, GCM: noresm"}
knitr::include_graphics("images/figure3e.png")
```

<!-------------------------->
## Monthly {.tabset}
<!-------------------------->

### All Sectors
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Monthly Example"}
knitr::include_graphics("images/figure4a.png")
```

### No Irrigation
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Without Irrigation"}
knitr::include_graphics("images/figure4b.png")
```

### Crops
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Without Irrigation"}
knitr::include_graphics("images/figure5.png")
```

<!-------------------------->
## Maps {.tabset}
<!-------------------------->
```{r, echo=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics("images/facetmapannual.png")
```
```{r, echo=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics("images/facetmapmonthly.png")
```

<br>

<!-------------------------->
<!-------------------------->
# Validation
<!-------------------------->
<!-------------------------->
<p align="center"> <img src="images/divider.png"></p>

<!-------------------------->
## Spatial {.tabset}
<!-------------------------->

6 of the 434 region-basin intersections are smaller than the output resolution, and are dropped, causing a small loss of water.

<!-------------------------->
### Withdrawals {.tabset .tabset-pills}
<!-------------------------->

#### Sectors
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="GCAM inputs vs grids Reaggregated"}
knitr::include_graphics("images/validation1.png")
```

#### Crops
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="GCAM inputs vs grids Reaggregated"}
knitr::include_graphics("images/validation2.png")
```

<!-------------------------->
### Consumption {.tabset .tabset-pills}
<!-------------------------->

#### Sectors
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="GCAM inputs vs grids Reaggregated"}
knitr::include_graphics("images/validation5.png")
```

#### Crops
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="GCAM inputs vs grids Reaggregated"}
knitr::include_graphics("images/validation6.png")
```

<!-------------------------->
## Temporal {.tabset}
<!-------------------------->

<!-------------------------->
### Withdrawals {.tabset .tabset-pills}
<!-------------------------->

#### Sectors
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="Annual vs Reaggregated Monthly"}
knitr::include_graphics("images/validation3.png")
```

#### Crops
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="Annual vs Reaggregated Monthly"}
knitr::include_graphics("images/validation4.png")
```

<!-------------------------->
### Consumption {.tabset .tabset-pills}
<!-------------------------->

#### Sectors
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="Annual vs Reaggregated Monthly"}
knitr::include_graphics("images/validation7.png")
```

#### Crops
```{r, echo=FALSE, out.width="75%", fig.align='center', fig.cap="Annual vs Reaggregated Monthly"}
knitr::include_graphics("images/validation8.png")
```

# Basin Examples
We have selected the following regions from literature to explore in more detail, as a way of showing the full resolution of this data set.
```{r, echo=FALSE, out.width="100%", fig.align='center', fig.cap="Selected Regions"}
knitr::include_graphics("images/overview_map.png")
```

## Indus

<!-------------------------->
### Crop Withdrawals {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
  cat("\n####", scenario_names[scenario], "\n")
  cat("![](images/regional/most_crop_Indus_w_", scenario, ".png)", sep="")
  cat("![](images/regional/crops_annual_Indus_w_", scenario, ".png)", sep="")
  cat('\n')
}
```

<!-------------------------->
### Withdrawals by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FiberCrop", "MiscCrop", "OilCrop", "OtherGrain", "Rice", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Indus_w", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Indus_w", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```


<!-------------------------->
### Consumption by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FiberCrop", "MiscCrop", "OilCrop", "OtherGrain", "Rice", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Indus_c", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Indus_c", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```



## Nile

<!-------------------------->
### Crop Withdrawals {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
  cat("\n####", scenario_names[scenario], "\n")
  cat("![](images/regional/most_crop_Nile_w_", scenario, ".png)", sep="")
  cat("![](images/regional/crops_annual_Nile_w_", scenario, ".png)", sep="")
  cat('\n')
}
```

<!-------------------------->
### Withdrawals by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FiberCrop", "FodderHerb", "MiscCrop", "OilCrop", "OtherGrain", "Rice", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Nile_w", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Nile_w", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```

<!-------------------------->
### Consumption by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FiberCrop", "FodderHerb", "MiscCrop", "OilCrop", "OtherGrain", "Rice", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Nile_c", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Nile_c", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```


## Colorado

<!-------------------------->
### Crop Withdrawals {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
  cat("\n####", scenario_names[scenario], "\n")
  cat("![](images/regional/most_crop_Upper_Colorado_River_w_", scenario, ".png)", sep="")
  cat("![](images/regional/crops_annual_Upper_Colorado_River_w_", scenario, ".png)", sep="")
  cat('\n')
}
```

<!-------------------------->
### Withdrawals by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FodderHerb", "MiscCrop", "OilCrop", "OtherGrain", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Upper_Colorado_River_w", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Upper_Colorado_River_w", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```


<!-------------------------->
### Consumption by Sector {.tabset}
<!-------------------------->

```{r, echo=FALSE, results = 'asis'}
for(sector in c("total", "dom", "elec", "mfg", "min", "liv", "irr", "Corn", "FodderHerb", "MiscCrop", "OilCrop", "OtherGrain", "Root_Tuber", "SugarCrop", "Wheat", "biomass")){
  cat("\n####", sector_names[sector], "{.tabset .tabset-pills}\n")
  for(scenario in c("ssp1_rcp26_gfdl", "ssp2_rcp45_hadgem", "ssp3_rcp60_ipsl", "ssp4_rcp45_miroc", "ssp5_rcp85_noresm")){
    cat("\n#####", scenario_names[scenario], "\n")
    cat("![](images/regional/spatial_Upper_Colorado_River_c", sector, "_", scenario, ".png)", sep="")
    cat("![](images/regional/temporal_Upper_Colorado_River_c", sector, "_", scenario, ".png)", sep="")
    cat('\n')
  }
}
```

